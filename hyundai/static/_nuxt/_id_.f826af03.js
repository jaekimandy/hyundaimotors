import{a as ee,r as b,b as m,w as le,e as ae,f as se,h as F,o as C,i as S,j as a,k as s,u as e,F as P,C as z,l as t,t as f,m as g,p as _,q as G,s as O,v as j,x as L,y as x,z as I,A as B,B as U,D as te,c as A,E as oe,G as ne,H as ie,I as ue,J as re,K as de,L as N,M as V,N as fe,O as w,P as q,Q as ce,R as pe}from"./entry.eba0565c.js";import{C as Ce,p as _e,a as ye,b as me,B as ve,L as be,c as ge,d as we,P as he,T as ke}from"./chart.742e63cc.js";import{p as Fe,L as Se}from"./chartjs-plugin-zoom.esm.03b4fee4.js";const Pe=["alt","src"],Le={class:"mb-3"},xe={class:"mb-3"},Ie=["src"],Be=ee({__name:"[id]",async setup(Ve){let H,$;Ce.register(_e,ye,me,ve,be,ge,we,he,Fe,ke);const r=b({show:!1,message:"",title:""}),n=b({step:0,startPos:0,endPos:0}),v=b({show:!1}),d=b({show:!1,loading:!1,title:""}),h=b({show:!1,levelCrossingImage:""}),T=m([]),J=ce(),K=i=>{var o,u,y;const l=document.getElementById(`image-${i}`);((o=l==null?void 0:l.style)==null?void 0:o.display)==="none"?(u=l==null?void 0:l.style)==null||u.setProperty("display","block"):(y=l==null?void 0:l.style)==null||y.setProperty("display","none")},Q=i=>`image-${i}`,W=i=>(console.log("getImageUrl",i),`${J.public.IMAGE_URL}${i}`),Z=async()=>{n.step=0,d.loading=!0;const i=D.value.slice(n.startPos,d.endPos),{data:l}=await F({operation:"createAnalysisLevelCrossing",variables:{analysisFileId:k.params.id,chartData:M.value.concat(i).join(`\r
`),title:d.title}});l.value?await F({operation:"analysisLevelCrossings",variables:{analysisFileId:k.params.id}}).then(o=>(T.value=o.data.value.analysisLevelCrossings,o)).finally(()=>{d.loading=!1,d.show=!1}):(d.loading=!1,d.show=!1)},E=m({labels:["1","2"],datasets:[{data:[10,20]}]});le(()=>n.step,i=>{switch(i){case 1:r.title="구간선택",r.message="시작위치 구간을 선택하세요",r.show=!0;break;case 2:r.title="구간선택",r.message="완료위치 구간을 선택하세요",r.show=!0;break;case 3:r.title="구간선택",r.message=`구간 선택이 완료되었습니다
선택하신 구간은 ${n.startPos} ~ ${n.endPos} 입니다`,r.show=!0;break;case 4:v.show=!0;break}});const X=()=>{switch(n.step){case 0:n.step=1;break}},Y=m({responsive:!0,onClick:(i,l)=>{if(!(l.length<=0))switch(n.step){case 1:n.startPos=l[0].index,n.step=2;break;case 2:n.endPos=l[0].index,n.step=3;break}}}),k=ae(),c=m(void 0),D=m(),M=m();return[H,$]=se(()=>F({operation:"analysisFile",variables:{id:k.params.id}}).then(i=>{const{data:l}=i;if(l.value){c.value={carType:l.value.analysisFile.carType,year:l.value.analysisFile.year,area:l.value.analysisFile.area,roadSurface:l.value.analysisFile.roadSurface,weight:l.value.analysisFile.weight,testCount:l.value.analysisFile.testCount,chartData:l.value.analysisFile.chartData};const o=l.value.analysisFile.chartData.split(`\r
`),u=o[2].split(",").findIndex(p=>p==="Front Left Wheel Center Force (Z)");M.value=o.slice(0,8),D.value=o.slice(8);const y=D.value.map(p=>{const R=p.split(",");return{x:R[0],y:R[u]}});E.value.labels=y.map(p=>p.x),E.value.datasets[0].data=y.map(p=>p.y)}}).finally(()=>{})),await H,$(),F({operation:"analysisLevelCrossings",variables:{analysisFileId:k.params.id}}).then(i=>(T.value=i.data.value.analysisLevelCrossings,i)).finally(()=>{}),(i,l)=>(C(),S(P,null,[a(e(O),{class:"mb-4"},{default:s(()=>[a(e(z),null,{default:s(()=>[t(f(e(c).carType)+"-"+f(e(c).year)+"-"+f(e(c).area)+" / "+f(e(c).weight)+"-"+f(e(c).roadSurface)+"-"+f(e(c).testCount)+" ",1),g("div",null,[a(e(_),{color:"primary",size:"sm",onClick:X},{default:s(()=>[t("구간선택")]),_:1})])]),_:1}),a(e(G),null,{default:s(()=>[a(e(Se),{ref:"chart",options:e(Y),data:e(E)},null,8,["options","data"])]),_:1})]),_:1}),a(e(O),{class:"mb-4"},{default:s(()=>[a(e(z),null,{default:s(()=>[t(" 구간목록 ")]),_:1}),a(e(G),null,{default:s(()=>[(C(!0),S(P,null,j(e(T),o=>(C(),A(e(oe),{key:o.id},{default:s(()=>[a(e(ne),null,{default:s(()=>[a(e(ie),{disabled:o.status!=="SUCCESS"},{default:s(()=>[t(f(o.title)+"("+f(o.status)+")",1)]),_:2},1032,["disabled"]),o.status==="SUCCESS"?(C(),A(e(ue),{key:0},{default:s(()=>[a(e(re),null,{default:s(()=>[a(e(de),null,{default:s(()=>[a(e(N),null,{default:s(()=>[a(e(V),null,{default:s(()=>[t("컬럼명")]),_:1}),a(e(V),null,{default:s(()=>[t("Damage")]),_:1}),a(e(V),null,{default:s(()=>[t("상태")]),_:1}),a(e(V),null,{default:s(()=>[t("이미지")]),_:1})]),_:1})]),_:1}),a(e(fe),null,{default:s(()=>[(C(!0),S(P,null,j(JSON.parse(o.images),u=>(C(),S(P,null,[a(e(N),null,{default:s(()=>[a(e(w),null,{default:s(()=>[t(f(u.columnName),1)]),_:2},1024),a(e(w),null,{default:s(()=>[t(f(u.damage),1)]),_:2},1024),a(e(w),null,{default:s(()=>[t(f(u.status),1)]),_:2},1024),a(e(w),null,{default:s(()=>[a(e(_),{size:"small",disabled:u.status!=="SUCCESS",onClick:y=>K(u==null?void 0:u.id)},{default:s(()=>[t("이미지보기")]),_:2},1032,["disabled","onClick"])]),_:2},1024)]),_:2},1024),u.status==="SUCCESS"?(C(),A(e(N),{key:0,id:Q(u.id),style:{display:"none"}},{default:s(()=>[a(e(w),{colspan:"4"},{default:s(()=>[g("img",{alt:u.columnName,src:W(u.filename)},null,8,Pe)]),_:2},1024)]),_:2},1032,["id"])):q("",!0)],64))),256))]),_:2},1024)]),_:2},1024)]),_:2},1024)):q("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a(e(B),{visible:e(r).show,onClose:l[1]||(l[1]=()=>{e(r).show=!1})},{default:s(()=>[a(e(L),null,{default:s(()=>[t(f(e(r).title),1)]),_:1}),a(e(x),null,{default:s(()=>[t(f(e(r).message),1)]),_:1}),a(e(I),null,{default:s(()=>[a(e(_),{color:"secondary",onClick:l[0]||(l[0]=()=>{e(r).show=!1,e(n).step===3&&(e(n).step=4)})},{default:s(()=>[t(" 확인 ")]),_:1})]),_:1})]),_:1},8,["visible"]),a(e(B),{visible:e(v).show,onClose:l[6]||(l[6]=()=>{e(v).show=!1})},{default:s(()=>[a(e(L),null,{default:s(()=>[t("선택하신 구간으로 저장하시겠습니까?")]),_:1}),a(e(x),null,{default:s(()=>[g("div",Le,[a(e(U),{modelValue:e(n).startPos,"onUpdate:modelValue":l[2]||(l[2]=o=>e(n).startPos=o),type:"text",label:"시작위치"},null,8,["modelValue"])]),g("div",xe,[a(e(U),{modelValue:e(n).endPos,"onUpdate:modelValue":l[3]||(l[3]=o=>e(n).endPos=o),type:"text",label:"완료위치"},null,8,["modelValue"])])]),_:1}),a(e(I),null,{default:s(()=>[a(e(_),{color:"secondary",onClick:l[4]||(l[4]=()=>{e(v).show=!1})},{default:s(()=>[t(" 취소 ")]),_:1}),a(e(_),{color:"primary",onClick:l[5]||(l[5]=()=>{e(v).show=!1,e(d).show=!0})},{default:s(()=>[t(" 잔행 ")]),_:1})]),_:1})]),_:1},8,["visible"]),a(e(B),{visible:e(d).show,onClose:l[9]||(l[9]=()=>{e(d).show=!1})},{default:s(()=>[a(e(L),null,{default:s(()=>[t("채널명을 입력하세요")]),_:1}),a(e(x),null,{default:s(()=>[a(e(U),{modelValue:e(d).title,"onUpdate:modelValue":l[7]||(l[7]=o=>e(d).title=o),type:"text",label:"채널명"},null,8,["modelValue"])]),_:1}),a(e(I),null,{default:s(()=>[a(e(_),{color:"secondary",disabled:e(d).loading,onClick:l[8]||(l[8]=()=>{e(r).show=!1})},{default:s(()=>[t(" 닫기 ")]),_:1},8,["disabled"]),a(e(te),{loading:e(d).loading,color:"primary",onClick:Z},{default:s(()=>[t(" 저장 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["visible"]),a(e(B),{visible:e(h).show,size:"lg",onClose:l[11]||(l[11]=()=>{e(h).show=!1})},{default:s(()=>[a(e(L),null,{default:s(()=>[t("Level Crossing")]),_:1}),a(e(x),null,{default:s(()=>[g("img",{src:e(h).levelCrossingImage,alt:""},null,8,Ie)]),_:1}),a(e(I),null,{default:s(()=>[a(e(_),{color:"secondary",onClick:l[10]||(l[10]=()=>{e(h).show=!1})},{default:s(()=>[t(" 닫기 ")]),_:1})]),_:1})]),_:1},8,["visible"])],64))}});const Ue=pe(Be,[["__scopeId","data-v-b800e8d9"]]);export{Ue as default};
