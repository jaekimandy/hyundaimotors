import{C as P,e as T,p as j,a as K,b as M,B as N,L as R,c as U,d as V,P as q,T as A}from"./chart.742e63cc.js";import{a as O,B,a4 as F,a5 as G,r as x,D as H,a6 as W,z as $,a7 as C,a8 as z,o as w,F as J,j as L,h as Q,u as y,p as D,c as X,a0 as Y,H as Z,t as tt,m as et,G as at}from"./entry.07433182.js";import{p as st}from"./chartjs-plugin-zoom.esm.c0d94425.js";const S={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},nt={type:{type:String,required:!0},...S},ot=G[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function v(t){return z(t)?C(t):t}function rt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return z(e)?new Proxy(t,{}):t}function lt(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function k(t,e){t.labels=e}function I(t,e,a){const n=[];t.datasets=e.map(o=>{const r=t.datasets.find(d=>d[a]===o[a]);return!r||!o.data||n.includes(r)?{...o}:(n.push(r),Object.assign(r,o),r)})}function it(t,e){const a={labels:[],datasets:[]};return k(a,t.labels),I(a,t.datasets,e),a}const ct=O({props:nt,setup(t,e){let{expose:a}=e;const n=x(null),o=B(null);a({chart:o});const r=()=>{if(!n.value)return;const{type:l,data:c,options:p,plugins:i,datasetIdKey:s}=t,f=it(c,s),m=rt(f,c);o.value=new P(n.value,{type:l,data:m,options:{...p},plugins:i})},d=()=>{const l=C(o.value);l&&(l.destroy(),o.value=null)},u=l=>{l.update(t.updateMode)};return H(r),W(d),$([()=>t.options,()=>t.data],(l,c)=>{let[p,i]=l,[s,f]=c;const m=C(o.value);if(!m)return;let h=!1;if(p){const g=v(p),_=v(s);g&&g!==_&&(lt(m,g),h=!0)}if(i){const g=v(i.labels),_=v(f.labels),b=v(i.datasets),E=v(f.datasets);g!==_&&(k(m.config.data,g),h=!0),b&&b!==E&&(I(m.config.data,b,t.datasetIdKey),h=!0)}h&&u(m)},{deep:!0}),()=>F("canvas",{ref:n})}});function ut(t,e){return P.register(e),O({props:S,setup(a,n){let{expose:o}=n;const r=B(null),d=u=>{r.value=u==null?void 0:u.chart};return o({chart:r}),()=>F(ct,ot({ref:d},{type:t,...a}))}})}const dt=ut("line",T),pt=O({__name:"chart",setup(t){P.register(j,K,M,N,R,U,V,q,st,A);const e=x(null),a=x(!1),n=x({labels:["1","2"],datasets:[{data:[10,20]}]}),r=x({responsive:!0,plugins:{zoom:{pan:{enabled:!0,mode:"x",modifierKey:"ctrl"},zoom:{mode:"x",drag:{enabled:!0,borderColor:"rgb(54, 162, 235)",borderWidth:1,backgroundColor:"rgba(54, 162, 235, 0.3)"}}},title:{display:!0,position:"bottom",text:u=>{}}},transitions:{zoom:{animation:{duration:100}}}}),d=u=>{e.value=u.target.files[0],(c=>new Promise((p,i)=>{const s=new FileReader;s.onload=()=>p(s.result),s.onerror=i,s.readAsText(c)}))(e.value).then(c=>{const i=c.split(`\r
`).slice(8).map(s=>{const f=s.split(",");return{x:f[0],y:f[2]}});console.log("-----4",i),n.value.labels=i.map(s=>s.x),n.value.datasets[0].data=i.map(s=>s.y),a.value=!0,console.log(n.value)})};return(u,l)=>(w(),J(Z,null,[L(y(et),null,{default:Q(()=>[D("div",null,[L(y(tt),{type:"file",label:"파일명",onChange:l[0]||(l[0]=c=>d(c))})])]),_:1}),D("div",null,[y(a)?(w(),X(y(dt),{key:0,ref:"chart",options:y(r),data:y(n)},null,8,["options","data"])):Y("",!0)])],64))}});const yt=at(pt,[["__scopeId","data-v-64827d4a"]]);export{yt as default};
