import{a as T,r as _,b as C,w as A,e as E,f as I,o as M,h as N,i as s,j as l,u as a,F as U,k as b,C as j,l as n,t as p,m as h,p as m,q,s as z,v as F,x as k,y as x,z as P,A as V,B as H,D as $}from"./entry.f19c0470.js";import{C as G,p as O,a as R,b as J,B as K,L as Q,c as W,d as X,P as Y,T as Z}from"./chart.742e63cc.js";import{L as aa}from"./index.aa6ccb8e.js";import{p as ea}from"./chartjs-plugin-zoom.esm.927f8b06.js";const sa={class:"mb-3"},la={class:"mb-3"},ta=T({__name:"[id]",async setup(oa){let y,B;G.register(O,R,J,K,Q,W,X,Y,ea,Z);const o=_({show:!1,message:"",title:""}),t=_({step:0,startPos:0,endPos:0}),f=_({show:!1}),i=_({show:!1,loading:!1,title:""}),L=async()=>{t.step=0,i.loading=!0;const d=g.value.slice(t.startPos,i.endPos),{data:e}=await b({operation:"createAnalysisLevelCrossing",variables:{analysisFileId:w.params.id,chartData:d.join(`\r
`),title:i.title}});e.value?await b({operation:"analysisLevelCrossings",variables:{analysisFileId:w.params.id}}).finally(()=>{i.loading=!1,i.show=!1}):(i.loading=!1,i.show=!1)},v=C({labels:["1","2"],datasets:[{data:[10,20]}]});A(()=>t.step,d=>{switch(console.log("step",d),d){case 1:o.title="구간선택",o.message="시작위치 구간을 선택하세요",o.show=!0;break;case 2:o.title="구간선택",o.message="완료위치 구간을 선택하세요",o.show=!0;break;case 3:o.title="구간선택",o.message=`구간 선택이 완료되었습니다
선택하신 구간은 ${t.startPos} ~ ${t.endPos} 입니다`,o.show=!0;break;case 4:f.show=!0;break}});const S=()=>{switch(t.step){case 0:t.step=1;break}},D=C({responsive:!0,onClick:(d,e)=>{if(!(e.length<=0))switch(console.log(e[0].index),t.step){case 1:t.startPos=e[0].index,t.step=2;break;case 2:t.endPos=e[0].index,t.step=3;break}}}),w=E(),{data:r}=([y,B]=I(()=>b({operation:"analysisFile",variables:{id:w.params.id}}).finally(()=>{})),y=await y,B(),y),c=C(void 0),g=C();if(r.value){c.value={carType:r.value.analysisFile.carType,year:r.value.analysisFile.year,area:r.value.analysisFile.area,roadSurface:r.value.analysisFile.roadSurface,weight:r.value.analysisFile.weight,testCount:r.value.analysisFile.testCount,chartData:r.value.analysisFile.chartData},g.value=r.value.analysisFile.chartData.split(`\r
`).slice(8);const d=g.value.map(e=>{const u=e.split(",");return{x:u[0],y:u[2]}});v.value.labels=d.map(e=>e.x),v.value.datasets[0].data=d.map(e=>e.y)}return(d,e)=>(M(),N(U,null,[s(a(z),{class:"mb-4"},{default:l(()=>[s(a(j),null,{default:l(()=>[n(p(a(c).carType)+"-"+p(a(c).year)+"-"+p(a(c).area)+" / "+p(a(c).weight)+"-"+p(a(c).roadSurface)+"-"+p(a(c).testCount)+" ",1),h("div",null,[s(a(m),{color:"primary",size:"sm",onClick:S},{default:l(()=>[n("구간선택")]),_:1})])]),_:1}),s(a(q),null,{default:l(()=>[s(a(aa),{ref:"chart",options:a(D),data:a(v)},null,8,["options","data"])]),_:1})]),_:1}),s(a(P),{visible:a(o).show,onClose:e[1]||(e[1]=()=>{a(o).show=!1})},{default:l(()=>[s(a(F),null,{default:l(()=>[n(p(a(o).title),1)]),_:1}),s(a(k),null,{default:l(()=>[n(p(a(o).message),1)]),_:1}),s(a(x),null,{default:l(()=>[s(a(m),{color:"secondary",onClick:e[0]||(e[0]=()=>{a(o).show=!1,a(t).step===3&&(a(t).step=4)})},{default:l(()=>[n(" 확인 ")]),_:1})]),_:1})]),_:1},8,["visible"]),s(a(P),{visible:a(f).show,onClose:e[6]||(e[6]=()=>{a(f).show=!1})},{default:l(()=>[s(a(F),null,{default:l(()=>[n("선택하신 구간으로 저장하시겠습니까?")]),_:1}),s(a(k),null,{default:l(()=>[h("div",sa,[s(a(V),{modelValue:a(t).startPos,"onUpdate:modelValue":e[2]||(e[2]=u=>a(t).startPos=u),type:"text",label:"시작위치"},null,8,["modelValue"])]),h("div",la,[s(a(V),{modelValue:a(t).endPos,"onUpdate:modelValue":e[3]||(e[3]=u=>a(t).endPos=u),type:"text",label:"완료위치"},null,8,["modelValue"])])]),_:1}),s(a(x),null,{default:l(()=>[s(a(m),{color:"secondary",onClick:e[4]||(e[4]=()=>{a(f).show=!1})},{default:l(()=>[n(" 취소 ")]),_:1}),s(a(m),{color:"primary",onClick:e[5]||(e[5]=()=>{a(f).show=!1,a(i).show=!0})},{default:l(()=>[n(" 잔행 ")]),_:1})]),_:1})]),_:1},8,["visible"]),s(a(P),{visible:a(i).show,onClose:e[9]||(e[9]=()=>{a(i).show=!1})},{default:l(()=>[s(a(F),null,{default:l(()=>[n("채널명을 입력하세요")]),_:1}),s(a(k),null,{default:l(()=>[s(a(V),{modelValue:a(i).title,"onUpdate:modelValue":e[7]||(e[7]=u=>a(i).title=u),type:"text",label:"채널명"},null,8,["modelValue"])]),_:1}),s(a(x),null,{default:l(()=>[s(a(m),{color:"secondary",disabled:a(i).loading,onClick:e[8]||(e[8]=()=>{a(o).show=!1})},{default:l(()=>[n(" 닫기 ")]),_:1},8,["disabled"]),s(a(H),{loading:a(i).loading,color:"primary",onClick:L},{default:l(()=>[n(" 저장 ")]),_:1},8,["loading"])]),_:1})]),_:1},8,["visible"])],64))}});const ua=$(ta,[["__scopeId","data-v-753057dd"]]);export{ua as default};
