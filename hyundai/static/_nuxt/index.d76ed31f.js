import{C as P,e as S}from"./chart.742e63cc.js";import{a as O,T as C,U as w,V as U,r as j,W as q,X as R,K as T,Y as b,Z as D}from"./entry.416271e7.js";const L={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},A={type:{type:String,required:!0},...L},B=U[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function c(t){return D(t)?b(t):t}function V(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return D(e)?new Proxy(t,{}):t}function W(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function I(t,e){t.labels=e}function K(t,e,s){const o=[];t.datasets=e.map(a=>{const n=t.datasets.find(l=>l[s]===a[s]);return!n||!a.data||o.includes(n)?{...a}:(o.push(n),Object.assign(n,a),n)})}function X(t,e){const s={labels:[],datasets:[]};return I(s,t.labels),K(s,t.datasets,e),s}const Y=O({props:A,setup(t,e){let{expose:s}=e;const o=j(null),a=C(null);s({chart:a});const n=()=>{if(!o.value)return;const{type:r,data:f,options:y,plugins:p,datasetIdKey:x}=t,g=X(f,x),u=V(g,f);a.value=new P(o.value,{type:r,data:u,options:{...y},plugins:p})},l=()=>{const r=b(a.value);r&&(r.destroy(),a.value=null)},d=r=>{r.update(t.updateMode)};return q(n),R(l),T([()=>t.options,()=>t.data],(r,f)=>{let[y,p]=r,[x,g]=f;const u=b(a.value);if(!u)return;let v=!1;if(y){const i=c(y),h=c(x);i&&i!==h&&(W(u,i),v=!0)}if(p){const i=c(p.labels),h=c(g.labels),m=c(p.datasets),M=c(g.datasets);i!==h&&(I(u.config.data,i),v=!0),m&&m!==M&&(K(u.config.data,m,t.datasetIdKey),v=!0)}v&&d(u)},{deep:!0}),()=>w("canvas",{ref:o})}});function Z(t,e){return P.register(e),O({props:L,setup(s,o){let{expose:a}=o;const n=C(null),l=d=>{n.value=d==null?void 0:d.chart};return a({chart:n}),()=>w(Y,B({ref:l},{type:t,...s}))}})}const z=Z("line",S);export{z as L};
